(function(o){function t(t){for(var n,r,a=t[0],l=t[1],c=t[2],d=0,g=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&g.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o[n]=l[n]);u&&u(t);while(g.length)g.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var o,t=0;t<i.length;t++){for(var e=i[t],n=!0,a=1;a<e.length;a++){var l=e[a];0!==s[l]&&(n=!1)}n&&(i.splice(t--,1),o=r(r.s=e[0]))}return o}var n={},s={app:0},i=[];function r(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=o,r.c=n,r.d=function(o,t,e){r.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:e})},r.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,t){if(1&t&&(o=r(o)),8&t)return o;if(4&t&&"object"===typeof o&&o&&o.__esModule)return o;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var n in o)r.d(e,n,function(t){return o[t]}.bind(null,n));return e},r.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return r.d(t,"a",t),t},r.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},r.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;i.push([0,"chunk-vendors"]),e()})({0:function(o,t,e){o.exports=e("56d7")},"56d7":function(o,t,e){"use strict";e.r(t);e("e260"),e("e6cf"),e("cca6"),e("a79d");var n=e("2b0e"),s=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("v-app",[e("Header",{attrs:{langs:o.langs},on:{"delete-local-strage":o.deleteLocalStrage}}),e("v-main",[e("v-container",[e("vue-page-transition",{attrs:{name:"fade"}},[e("router-view",{attrs:{books:o.books,users:o.users,borrowing:o.borrowing},on:{"update-books":o.updateBooks,"update-users":o.updateUsers,"add-borrowing":o.addBorrowing,"del-borrowing":o.delBorrowing}})],1)],1)],1),e("Footer")],1)},i=[],r=(e("c740"),e("a434"),e("d3b7"),e("b0c0"),e("99af"),e("e9c4"),function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("v-app-bar",{attrs:{app:"",color:"primary",dark:"",elevation:"4"}},[e("v-toolbar-title",[o._v(" "+o._s(o.$t("app_name")))]),e("v-spacer"),e("v-btn",{attrs:{text:"",rounded:"",disabled:"Home"===this.$route.name},on:{click:o.goToHome}},[o._v(o._s(o.$t("btn_home")))]),e("v-btn",{attrs:{text:"",rounded:"",disabled:"Borrowing"===this.$route.name},on:{click:o.goToBorrowing}},[o._v(o._s(o.$t("btn_borrowing")))]),e("v-btn",{attrs:{text:"",rounded:"",disabled:"Returning"===this.$route.name},on:{click:o.goToReturning}},[o._v(o._s(o.$t("btn_returning")))]),e("v-btn",{attrs:{text:"",rounded:"",disabled:"BookSearch"===this.$route.name},on:{click:o.goToBookSearch}},[o._v(o._s(o.$t("btn_booksearch")))]),e("v-btn",{attrs:{text:"",rounded:"",disabled:"UserSearch"===this.$route.name},on:{click:o.goToUserSearch}},[o._v(o._s(o.$t("btn_usersearch")))]),e("v-spacer"),e("v-btn",{attrs:{color:"error"},on:{click:o.deleteLocalStrage}},[o._v(o._s(o.$t("btn_reset")))]),e("img",{attrs:{src:o.lang_img,width:"50"},on:{click:o.changeLang}})],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}})],1)}),a=[],l=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("v-dialog",{attrs:{"max-width":"300"},model:{value:o.dialog.on,callback:function(t){o.$set(o.dialog,"on",t)},expression:"dialog.on"}},[e("v-card",[e("v-card-text",[o._v(o._s(o.dialog.msg))]),e("v-card-actions",[e("v-spacer"),"notice"===o.dialog.type?e("div",[e("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return o.closeDialog()}}},[o._v("close")])],1):"confirm"===o.dialog.type?e("div",[e("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return o.closeDialog(!0)}}},[o._v("OK")]),e("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return o.closeDialog(!1)}}},[o._v("cancel")])],1):o._e()],1)],1)],1)},c=[],u={name:"CommonDialog",props:{dialog:Object},data:function(){return{}},methods:{closeDialog:function(){var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close-common-dialog",o)}}},d=u,g=e("2877"),h=e("6544"),m=e.n(h),b=e("8336"),v=e("b0af"),p=e("99d9"),f=e("169a"),_=e("2fa4"),k=Object(g["a"])(d,l,c,!1,null,null,null),w=k.exports;m()(k,{VBtn:b["a"],VCard:v["a"],VCardActions:p["a"],VCardText:p["b"],VDialog:f["a"],VSpacer:_["a"]});var y={name:"Header",props:{langs:Array},components:{"common-dialog":w},data:function(){return{lang_img:"",dialog:{on:!1,msg:"",type:"notice",to:""}}},mounted:function(){this.lang_img=this.$i18n.locale+".png"},methods:{deleteLocalStrage:function(){this.dialog.msg="データをリセットしますか？",this.dialog.type="confirm",this.dialog.to="/",this.dialog.on=!0},changeLang:function(){var o=this,t=this.langs.findIndex((function(t){return t===o.$i18n.locale})),e=(t+1)%this.langs.length;this.$i18n.locale=this.langs[e],this.lang_img=this.langs[e]+".png"},goToHome:function(){"Home"!==this.$route.name&&this.$router.push("/")},goToBorrowing:function(){"Borrowing"!==this.$route.name&&this.$router.push("/borrowing")},goToReturning:function(){"Returning"!==this.$route.name&&this.$router.push("/returning")},goToBookSearch:function(){"BookSearch"!==this.$route.name&&this.$router.push("/booksearch")},goToUserSearch:function(){"UserSearch"!==this.$route.name&&this.$router.push("/usersearch")},closeCommonDialog:function(o){this.dialog.to="",this.dialog.on=!1,o&&this.$emit("delete-local-strage")}}},x=y,B=e("40dc"),S=e("2a7f"),A=Object(g["a"])(x,r,a,!1,null,null,null),C=A.exports;m()(A,{VAppBar:B["a"],VBtn:b["a"],VSpacer:_["a"],VToolbarTitle:S["a"]});var V=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div")},I=[],$={},T=$,O=Object(g["a"])(T,V,I,!1,null,null,null),U=O.exports,D="books",E="users",N="borrowing",j={name:"App",components:{Header:C,Footer:U},data:function(){return{books:[],users:[],borrowing:[],langs:["ja","en","it"],default_books:[{isbn:"9788867582143",title:"I promessi sposi",authors:"Alessandro Manzoni",image:"http://books.google.com/books/content?id=vIXxzQEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780143106272",title:"Great Expectations",authors:"Charles Dickens",image:"http://books.google.com/books/content?id=IBspDwAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9784094087871",title:"坊っちゃん",authors:"夏目 漱石",image:"http://books.google.com/books/content?id=6XV2lAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9784003107638",title:"銀河鉄道の夜他十四篇(童話集)",authors:"宮沢 賢治",image:"http://books.google.com/books/content?id=pMJmPwAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9788807901119",title:"Pinocchio",authors:"Carlo Collodi",image:"http://books.google.com/books/content?id=QimZoAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9781948132824",title:"The Adventures of Tom Sawyer",authors:"Mark Twain",image:"http://books.google.com/books/content?id=72sitwEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780316769532",title:"The Catcher in the Rye",authors:"J. D. Salinger",image:"http://books.google.com/books/content?id=m3GzoAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780544133228",title:"Marcovaldo",authors:"Italo Calvino",image:"http://books.google.com/books/content?id=iGA4mhtQWD8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9784862392930",title:"スティル・ライフ",authors:"池澤 夏樹",image:"http://books.google.com/books/content?id=m_UACgAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9788807813023",title:"Novecento",authors:"Alessandro Baricco",image:"http://books.google.com/books/content?id=gNZzQIE3EUAC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9780345803054",title:"Breakfast at Tiffany's",authors:"Truman Capote",image:"http://books.google.com/books/content?id=UwWWh1WLn9EC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9788858835685",title:"Sostiene Pereira",authors:"Antonio Tabucchi",image:"http://books.google.com/books/content?id=aOSRDwAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9784061984585",title:"焼跡のイエス・善財",authors:"石川 淳",image:"http://books.google.com/books/content?id=C0moAgAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9788823513457",title:"In altre parole",authors:"Jhumpa Lahiri",image:"http://books.google.com/books/content?id=PLJOjwEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"}],default_users:[{id:1,name:"Alessandro Manzoni",email:"amanzoni@dummy.com"},{id:2,name:"Charles Dickens",email:"cdickends@dummy.com"},{id:3,name:"夏目 漱石",email:"snatsume@dummy.com"}],default_borrowing:[{book_isbn:"9788867582143",user_id:1,create_datetime:"2022-05-24T01:04:49.813Z"},{book_isbn:"9780143106272",user_id:1,create_datetime:"2022-05-24T01:04:49.813Z"}]}},mounted:function(){if(this.$i18n.locale=this.langs[0],localStorage.getItem(D))try{this.books=JSON.parse(localStorage.getItem(D))}catch(o){localStorage.removeItem(D)}if(this.books.length||(this.books=this.default_books,this.saveBooks()),localStorage.getItem(E))try{this.users=JSON.parse(localStorage.getItem(E))}catch(o){localStorage.removeItem(E)}if(this.users.length||(this.users=this.default_users,this.saveUsers()),localStorage.getItem(N))try{this.borrowing=JSON.parse(localStorage.getItem(N))}catch(o){localStorage.removeItem(N)}this.borrowing.length||(this.borrowing=this.default_borrowing,this.saveBorrowing())},methods:{updateBooks:function(o){var t=this.books.findIndex((function(t){return t.isbn===o.isbn}));-1===t&&(t=this.books.length),this.books.splice(t,1,o),this.saveBooks()},updateUsers:function(o){var t=o.id?o.id:this.users.reduce((function(o,t){return o>t.id?o:t.id}),0)+1,e={id:t,name:o.name,email:o.email},n=this.users.findIndex((function(o){return o.id===t}));-1===n&&(n=this.users.length),this.users.splice(n,1,e),this.saveUsers()},addBorrowing:function(o){this.borrowing=this.borrowing.concat(o),this.saveBorrowing()},delBorrowing:function(o){for(var t=this,e=function(e){var n=t.borrowing.findIndex((function(t){return t.book_isbn==o[e].isbn}));t.borrowing.splice(n,1)},n=0;n<o.length;n++)e(n);this.saveBorrowing()},saveBooks:function(){var o=JSON.stringify(this.books);localStorage.setItem(D,o)},saveUsers:function(){var o=JSON.stringify(this.users);localStorage.setItem(E,o)},saveBorrowing:function(){var o=JSON.stringify(this.borrowing);localStorage.setItem(N,o)},deleteLocalStrage:function(){localStorage.setItem(D,""),localStorage.removeItem(D),localStorage.setItem(E,""),localStorage.removeItem(E),localStorage.setItem(N,""),localStorage.removeItem(N),this.books=[],this.users=[],this.borrowing=[],this.$router.go()}}},R=j,J=(e("5c0b"),e("7496")),z=e("a523"),F=e("f6c4"),H=Object(g["a"])(R,s,i,!1,null,null,null),L=H.exports;m()(H,{VApp:J["a"],VContainer:z["a"],VMain:F["a"]});var P=e("8c4f"),M=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("h2",[o._v(o._s(o.$t("hello")))]),e("br"),o._m(0),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"3"}},[e("h3",[o._v("主な機能")]),e("ul",[e("li",[o._v("蔵書の登録・検索")]),e("li",[o._v("利用者の登録・検索")]),e("li",[o._v("貸出と返却の処理")])])]),e("v-col",{attrs:{cols:"3"}},[e("h3",[o._v("開発環境")]),e("ul",[e("li",[o._v("npm 8.1.2")]),e("li",[o._v("node.js 16.13.2")]),e("li",[o._v("express.js 4.18.1")]),e("li",[o._v("vue.js 2.6.11")])])]),e("v-col",{attrs:{cols:"6"}})],1),e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("p",[o._v(" 使う人・団体によって必要となる機能は異なりますが、これから最低限すべき作業は、 "),e("ul",[e("li",[o._v("ログイン画面設置、バリデーションチェックなどのセキュリティ対応")]),e("li",[o._v("データベースの準備とバックエンドの実装")]),e("li",[o._v("利用者向け画面の追加")]),e("li",[o._v("翻訳やバグ取り")])]),o._v(" といったところでしょうか。"),e("br"),o._v(" WEBサーバ・DBサーバを立てるのが難しい場合、Electron アプリとしてインストールし、スタンドアローンで使う手もあります。 ")])]),e("v-col",{attrs:{cols:"6"}})],1)],1),e("router-link",{attrs:{to:"/testa"}},[o._v("test")])],1)},G=[function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("p",[o._v("フロントエンドのフレームワーク Vue.js の学習の一環として、書籍をISBNで管理する、簡単な蔵書管理アプリを作成しました。"),e("br"),o._v(" Ubuntu 18.04 , GoogleChrome 101.0（64 ビット）で動作確認しています。"),e("br"),o._v(" ISBNは、バーコードリーダーで読み取ることを想定していますが、リーダーを持っていないため、このテストは実施できません。"),e("br"),o._v(" データは、WEBストレージ（localStorage）に格納しています。"),e("br")])}],Q={name:"Home",props:{books:Array,users:Array,borrowing:Array},data:function(){return{msg:""}},methods:{},watch:{}},W=Q,Z=e("62ad"),X=e("0fd9"),q=Object(g["a"])(W,M,G,!1,null,null,null),K=q.exports;m()(q,{VCol:Z["a"],VContainer:z["a"],VRow:X["a"]});var Y=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v("貸出")]),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{label:"user id",outlined:""},on:{change:o.getUser},model:{value:o.user_id,callback:function(t){o.user_id=t},expression:"user_id"}})],1),e("v-col",{attrs:{cols:"6"}},[o._v(" "+o._s(o.user.name)),e("v-spacer")],1)],1),e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{label:"ISBN",outlined:""},on:{input:o.getBook},model:{value:o.isbn,callback:function(t){o.isbn=t},expression:"isbn"}})],1),e("v-col",{attrs:{cols:"6"}},[e("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:o.execBorrowing}},[o._v("貸出")]),e("v-spacer")],1)],1),e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("v-card",{attrs:{elevation:"2"}},[o.new_borrowing_books.length?e("v-simple-table",{scopedSlots:o._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[o._v("ISBN")]),e("th",{staticClass:"text-left"},[o._v("Title ")]),e("th")])]),e("tbody",o._l(o.new_borrowing_books,(function(t,n){return e("tr",{key:t.isbn},[e("td",[o._v(o._s(t.isbn))]),e("td",[o._v(o._s(t.title))]),e("td",[e("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return o.cancel(n)}}},[o._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,3697624433)}):o._e()],1),e("br"),e("br"),e("br"),e("br"),e("v-card",{attrs:{elevation:"2"}},[o.borrowed_books.length?e("v-simple-table",[e("caption",[o._v("貸出中の図書")]),e("thead",[e("tr",[e("th",{staticClass:"text-left"},[o._v("ISBN")]),e("th",{staticClass:"text-left"},[o._v("Title ")]),e("th",{staticClass:"text-left"},[o._v("Date")]),e("th")])]),e("tbody",o._l(o.borrowed_books,(function(t){return e("tr",{key:t.isbn},[e("td",[o._v(o._s(t.isbn))]),e("td",[o._v(o._s(t.title))]),e("td",[o._v(o._s(t.date))])])})),0)]):o._e()],1)],1),e("v-col",{attrs:{cols:"4"}})],1)],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}})],1)},oo=[],to=e("53ca"),eo=(e("7db0"),e("159b"),e("4de4"),e("25f0"),{name:"borrowing",props:{books:Array,users:Array,borrowing:Array},components:{"common-dialog":w},data:function(){return{user_id:"",isbn:"",user:{id:0,name:"",email:""},book:{isbn:"",title:"",image:""},new_borrowing_books:[],borrowed_books:[],dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{getUser:function(){if(0!=this.user_id.length){var o=parseInt(this.user_id);if(!isNaN(o)){var t=this.users.find((function(t){return t.id===o}));if(!t)return this.dialog.msg="この利用者IDは登録されていません。",void(this.dialog.on=!0);this.user=t,this.borrowed_books=this.getBorrowedBooksByUserId(o)}}},execBorrowing:function(){if(!this.user_id.length||!this.new_borrowing_books.length)return this.dialog.msg="利用者IDと貸出図書のISBNを入力して下さい。",void(this.dialog.on=!0);var o=[],t=this.user.id,e=new Date;this.new_borrowing_books.forEach((function(n){console.log("foreach"),console.log(n.title),console.log(t),o.push({user_id:t,book_isbn:n.isbn,create_datetime:e})})),this.$emit("add-borrowing",o),this.dialog.msg="貸出処理を実行しました。",this.dialog.on=!0,this.resetForm()},cancel:function(o){this.new_borrowing_books.splice(o,1)},resetForm:function(){this.user_id="",this.isbn="",this.user={id:0,name:"",email:""},this.book={isbn:"",title:"",image:""},this.new_borrowing_books=[],this.borrowed_books=[]},getBook:function(){console.log("getBook");var o=this.isbn;if(13===o.length){console.log("abc");var t=this.borrowing.some((function(t){return t.book_isbn===o}));if(console.log(o+" exist in borrowing:"+t),t)return console.log("check borrowing"),this.dialog.msg="貸し出し中の図書です。",this.dialog.on=!0,void(this.book="");var e=this.books.findIndex((function(t){return t.isbn===o}));if(console.log("book_index:"+e),-1==e)return console.log("check books"),this.dialog.msg="登録されていない図書です。",void(this.dialog.on=!0);this.book=this.books[e],console.log(this.book),this.new_borrowing_books.push(this.books[e])}},getBorrowedBooksByUserId:function(o){var t=this,e=this.borrowing.filter((function(t){return t.user_id===o}));console.log("userid: "+o),console.log("typeof"+Object(to["a"])(e)),console.log("toString:"+e.toString()),console.log("isarray: "+Array.isArray(e)),console.log("length:"+e.length),console.log("filtered_borrowing:"+e);for(var n=[],s={},i=function(o){s=t.books.find((function(t){return t.isbn===e[o].book_isbn}));var i=new Date(e[o].create_datetime);s.date=i.getFullYear()+"/"+(i.getMonth()+1)+"/"+i.getDate(),n.push(s)},r=0;r<e.length;r++)i(r);return n},closeCommonDialog:function(o){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+o),t&&this.$router.push(t)}},watch:{}}),no=eo,so=e("1f4f"),io=e("8654"),ro=Object(g["a"])(no,Y,oo,!1,null,null,null),ao=ro.exports;m()(ro,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VContainer:z["a"],VRow:X["a"],VSimpleTable:so["a"],VSpacer:_["a"],VTextField:io["a"]});var lo=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v("返却")]),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"6"}},[e("v-text-field",{attrs:{label:"ISBN",outlined:""},model:{value:o.isbn,callback:function(t){o.isbn=t},expression:"isbn"}})],1),e("v-col",{attrs:{cols:"6"}},[e("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:o.execReturning}},[o._v("返却")]),e("v-spacer")],1)],1),e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("v-card",{attrs:{elevation:"2"}},[o.new_returning_books.length?e("v-simple-table",{scopedSlots:o._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[o._v("ISBN")]),e("th",{staticClass:"text-left"},[o._v("Title ")]),e("th")])]),e("tbody",o._l(o.new_returning_books,(function(t,n){return e("tr",{key:t.isbn},[e("td",[o._v(o._s(t.isbn))]),e("td",[o._v(o._s(t.title))]),e("td",[e("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return o.cancel(n)}}},[o._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,2732754158)}):o._e()],1)],1),e("v-col",{attrs:{cols:"4"}})],1)],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}})],1)},co=[],uo={name:"Returning",props:{books:Array,users:Array,borrowing:Array},components:{"common-dialog":w},data:function(){return{isbn:"",book:{isbn:"",title:"",image:""},new_returning_books:[],dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{cancel:function(o){this.new_returning_books.splice(o,1)},execReturning:function(){if(!this.new_returning_books.length)return this.dialog.msg="返却図書のISBNを入力して下さい。",void(this.dialog.on=!0);var o=this.new_returning_books;this.$emit("del-borrowing",o),this.new_returning_books=[],this.dialog.msg="返却処理を実行しました。",this.dialog.on=!0,this.resetForm()},resetForm:function(){this.isbn="",this.book={isbn:"",title:"",image:""},this.new_returning_books=[]},closeCommonDialog:function(o){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+o),t&&this.$router.push(t)}},watch:{isbn:function(o){if(13===o.length){var t=this.books.findIndex((function(t){return t.isbn===o}));if(console.log("book_index: "+t),-1==t)return this.dialog.msg="登録されていない図書です。",void(this.dialog.on=!0);var e=this.borrowing.some((function(t){return t.book_isbn===o}));if(console.log("exist_borrowing: "+e),!e)return this.dialog.msg="貸し出されていない図書です。",void(this.dialog.on=!0);this.book=this.books[t],this.new_returning_books.push(this.books[t])}}}},go=uo,ho=Object(g["a"])(go,lo,co,!1,null,null,null),mo=ho.exports;m()(ho,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VContainer:z["a"],VRow:X["a"],VSimpleTable:so["a"],VSpacer:_["a"],VTextField:io["a"]});var bo=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v("蔵書検索")]),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"7",sm:"4"}},[e("v-text-field",{attrs:{label:"keyword",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":o.searchBook},model:{value:o.keyword,callback:function(t){o.keyword=t},expression:"keyword"}})],1),e("v-col",{attrs:{cols:"1",sm:"1"}},[e("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return o.editBook("0")}}},[e("v-icon",[o._v(" mdi-plus ")])],1)],1),e("v-col",{attrs:{cols:"4"}},[e("v-spacer")],1)],1),e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("v-card",{attrs:{elevation:"2"}},[o.search_result.length?e("v-simple-table",{scopedSlots:o._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[o._v("ISBN")]),e("th",{staticClass:"text-left"},[o._v("Title ")]),e("th",{staticClass:"text-left"},[o._v("Authors ")])])]),e("tbody",o._l(o.search_result,(function(t){return e("tr",{key:t.isbn,on:{click:function(e){return o.editBook(t.isbn)}}},[e("td",[o._v(o._s(t.isbn))]),e("td",[o._v(o._s(t.title))]),e("td",[o._v(o._s(t.authors))])])})),0)]},proxy:!0}],null,!1,188450955)}):o._e()],1)],1),e("v-col",{attrs:{cols:"4"}},[e("v-spacer")],1)],1)],1)],1)},vo=[],po=(e("4d63"),e("c607"),e("ac1f"),e("2c3e"),e("00b4"),{name:"BookSearch",props:{books:Array,users:Array,borrowing:Array},data:function(){return{keyword:"",search_result:[]}},methods:{searchBook:function(){var o=new RegExp(this.keyword,"i");this.search_result=this.books.filter((function(t){return o.test(t.title)||o.test(t.authors)}))},editBook:function(o){this.$router.push("/bookedit/".concat(o))}}}),fo=po,_o=e("132d"),ko=Object(g["a"])(fo,bo,vo,!1,null,"17addd5a",null),wo=ko.exports;m()(ko,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VContainer:z["a"],VIcon:_o["a"],VRow:X["a"],VSimpleTable:so["a"],VSpacer:_["a"],VTextField:io["a"]});var yo=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v(o._s(o.execType))]),e("v-card",{attrs:{elevation:"2"}},[e("v-row",[e("v-col",{attrs:{cols:"4"}},[e("v-img",{attrs:{src:o.book.image,width:"200"}})],1),e("v-col",{attrs:{cols:"8"}},[e("v-row",[e("v-col",[e("v-text-field",{attrs:{id:"isbn",label:"ISBN",outlined:"",readonly:o.editmode},on:{input:o.checkISBN},model:{value:o.isbn,callback:function(t){o.isbn=t},expression:"isbn"}})],1),e("v-col",[e("v-radio-group",{attrs:{row:""},on:{change:o.checkISBN},model:{value:o.book_api,callback:function(t){o.book_api=t},expression:"book_api"}},[e("v-radio",{attrs:{label:"Google Books",value:"google"}}),e("v-radio",{attrs:{label:"NDL OpenSearch",value:"ndl"}})],1)],1)],1),e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("br"),e("v-text-field",{attrs:{label:"Title",outlined:""},model:{value:o.book.title,callback:function(t){o.$set(o.book,"title",t)},expression:"book.title"}}),e("br"),e("v-text-field",{attrs:{label:"Authors",outlined:""},model:{value:o.book.authors,callback:function(t){o.$set(o.book,"authors",t)},expression:"book.authors"}}),e("br"),e("p",{directives:[{name:"show",rawName:"v-show",value:o.book_status,expression:"book_status"}]},[o._v(" 状態："+o._s(o.book_status)+" "),e("br")]),e("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:o.updateBook}},[o._v(o._s(o.execType))])],1)],1)],1)],1)],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}})],1)},xo=[],Bo=e("1da1"),So=(e("96cf"),e("3ca3"),e("ddb0"),e("9861"),e("841c"),e("fb6a"),{name:"BookEdit",props:{books:Array,users:Array,borrowing:Array},components:{"common-dialog":w},data:function(){return{book:{isbn:"",title:"",authors:"",image:"no-image.png"},editmode:!1,book_api:"google",isbn:"",execType:"",book_status:"",dialog:{on:!1,msg:"test text",type:"notice",to:""}}},methods:{updateBook:function(){if(console.log(this.book),!this.book.isbn||!this.book.title)return this.dialog.msg="ISBNとタイトルを入力して下さい。",void(this.dialog.on=!0);this.$emit("update-books",this.book),this.dialog.msg=this.execType+"処理を実行しました。",this.dialog.to="/book_search",this.dialog.on=!0},resetForm:function(){this.book={isbn:"",title:"",authors:"",image:"no-image.png"},this.isbn=""},closeDialog:function(){this.dialog.on=!1;var o=this.dialog.to;this.dialog.to="",o&&this.$router.push(o)},checkISBN:function(){var o=this;if(!this.editmode&&13===this.isbn.length){console.log("checkISBN");var t=this.books.some((function(t){return t.isbn==o.isbn}));if(t)return this.dialog.msg="すでに登録済みです。",this.dialog.on=!0,void(this.isbn="");var e=this.isbn;"google"===this.book_api?this.getBookInfo1(e):"ndl"===this.book_api&&this.getBookInfo2(e)}},getBookInfo1:function(o){var t=this;return Object(Bo["a"])(regeneratorRuntime.mark((function e(){var n,s,i,r,a,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getBookInfo1"),t.searchResults=[],n="https://www.googleapis.com/books/v1/volumes?",s={q:"isbn:".concat(o),maxResults:1},i=new URLSearchParams(s),e.next=7,fetch(n+i).then((function(o){return o.json()}));case 7:if(r=e.sent,0!=r.totalItems){e.next=12;break}return t.dialog.msg="ISBN non found in Google Books",t.dialog.on=!0,e.abrupt("return");case 12:console.log(r.items),a=r.items[0].volumeInfo,console.log(a),l=a.title?a.title:"",c=Array.isArray(a.authors)?a.authors.toString():"",u=a.imageLinks.thumbnail?a.imageLinks.thumbnail:"no-image.png",t.book.isbn=o,t.book.title=l,t.book.authors=c,t.book.image=u;case 22:case"end":return e.stop()}}),e)})))()},getBookInfo2:function(o){var t="https://iss.ndl.go.jp/api/opensearch?",e={isbn:"isbn:".concat(o),cnt:1},n=new URLSearchParams(e);this.axios.get(t+n,{timeout:5e3,responseType:"document"}).then((function(t){var e=t.data,n=e.search(/<item>/i);if(-1===n)return this.dialog.msg="ISBN non found in NDL",void(this.dialog.on=!0);var s=e.search(/<\/item>/i),i=e.slice(n+6,s),r=i.search(/<title>/i),a=i.search(/<\/title>/i),l=i.slice(r+7,a);console.log("title : "+l);var c=i.search(/<author>/i),u=i.search(/<\/author>/i),d=i.slice(c+8,u);console.log("author : "+d);var g="no-image.png";console.log(g),this.book.isbn=o,this.book.title=l,this.book.authors=d,this.book.image=g})).catch((function(o){console.log(o)}))},closeCommonDialog:function(o){this.dialog.on=!1,console.log("close common dialog: "+o)}},mounted:function(){var o=this.$route.params.isbn;"0"==o?(this.isbn="",this.editmode=!1,this.execType="登録",this.book_status=""):(console.log("isbn: "+o),this.isbn=o,this.editmode=!0,this.book=this.books.find((function(t){return t.isbn===o})),console.log(this.book),this.execType="更新",this.borrowing.some((function(t){return t.book_isbn===o}))?this.book_status="貸出中":this.book_status="在架")}}),Ao=So,Co=e("adda"),Vo=e("67b6"),Io=e("43a6"),$o=Object(g["a"])(Ao,yo,xo,!1,null,null,null),To=$o.exports;m()($o,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VImg:Co["a"],VRadio:Vo["a"],VRadioGroup:Io["a"],VRow:X["a"],VTextField:io["a"]});var Oo=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v("利用者検索")]),e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"7",sm:"4"}},[e("v-text-field",{attrs:{label:"name",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":o.searchUser},model:{value:o.name,callback:function(t){o.name=t},expression:"name"}})],1),e("v-col",{attrs:{cols:"1",sm:"1"}},[e("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return o.editUser(0)}}},[e("v-icon",[o._v(" mdi-plus ")])],1)],1),e("v-col",{attrs:{cols:"4"}},[e("v-spacer")],1)],1),e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("v-card",{attrs:{elevation:"2"}},[o.search_result.length?e("v-simple-table",{scopedSlots:o._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[o._v("ID")]),e("th",{staticClass:"text-left"},[o._v("Name ")]),e("th",{staticClass:"test-left"},[o._v("E-mail")])])]),e("tbody",o._l(o.search_result,(function(t){return e("tr",{key:t.id,on:{click:function(e){return o.editUser(t.id)}}},[e("td",[o._v(o._s(t.id))]),e("td",[o._v(o._s(t.name))]),e("td",[o._v(o._s(t.email))])])})),0)]},proxy:!0}],null,!1,1306142549)}):o._e()],1)],1),e("v-col",{attrs:{cols:"4"}},[e("v-spacer")],1)],1)],1)],1)},Uo=[],Do={name:"UserSearch",props:{books:Array,users:Array,borrowing:Array},data:function(){return{name:"",search_result:[]}},methods:{searchUser:function(){var o=new RegExp(this.name,"i");this.search_result=this.users.filter((function(t){return o.test(t.name)}))},editUser:function(o){this.$router.push("/useredit/".concat(o))}}},Eo=Do,No=Object(g["a"])(Eo,Oo,Uo,!1,null,null,null),jo=No.exports;m()(No,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VContainer:z["a"],VIcon:_o["a"],VRow:X["a"],VSimpleTable:so["a"],VSpacer:_["a"],VTextField:io["a"]});var Ro=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[e("p",[o._v(o._s(o.execType))]),e("v-card",{attrs:{elevation:"2"}},[e("v-row",[e("v-col",{attrs:{cols:"8"}},[e("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"更新"==o.execType,expression:"execType == '更新'"}],attrs:{label:"ID",outlined:"",readonly:""},model:{value:o.user.id,callback:function(t){o.$set(o.user,"id",t)},expression:"user.id"}}),e("br"),e("v-text-field",{attrs:{label:"Name",outlined:""},model:{value:o.user.name,callback:function(t){o.$set(o.user,"name",t)},expression:"user.name"}}),e("br"),e("v-text-field",{attrs:{label:"E-mail",outlined:""},model:{value:o.user.email,callback:function(t){o.$set(o.user,"email",t)},expression:"user.email"}})],1),e("v-col",{attrs:{cols:"8"}},[e("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:o.updateUser}},[o._v(o._s(o.execType))])],1)],1)],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}})],1)},Jo=[],zo={name:"UserEdit",props:{books:Array,users:Array,borrowing:Array},components:{"common-dialog":w},data:function(){return{user:{id:0,name:"",email:""},execType:"",dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{resetForm:function(){this.user={id:0,name:"",email:""}},updateUser:function(){var o=this,t=this.users.some((function(t){return t.email==o.user.email}));if(!this.user.id&&t)return this.dialog.msg="このメールアドレスは、すでに登録済みです。",void(this.dialog.on=!0);this.$emit("update-users",this.user),this.dialog.msg=this.execType+"処理を実行しました。",this.dialog.on=!0},closeCommonDialog:function(o){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+o),t&&this.$router.push(t)}},mounted:function(){console.log(this.$route.params.id);var o=1*this.$route.params.id;0!==o?(this.execType="更新",this.user=this.users.find((function(t){return t.id===o}))):this.execType="登録"}},Fo=zo,Ho=Object(g["a"])(Fo,Ro,Jo,!1,null,null,null),Lo=Ho.exports;m()(Ho,{VBtn:b["a"],VCard:v["a"],VCol:Z["a"],VRow:X["a"],VTextField:io["a"]});var Po=function(){var o=this,t=o.$createElement,e=o._self._c||t;return e("div",[o._v(" "+o._s(o.$t("hello"))),e("br"),e("v-text-field",{attrs:{clearable:"",id:"myid"},on:{paste:o.myEventHandler2},model:{value:o.msg,callback:function(t){o.msg=t},expression:"msg"}}),e("br"),e("v-icon",[o._v("mdi-plus")]),e("v-icon",[o._v("mdi-open-in-new")]),e("v-icon",[o._v("mdi-pencil")]),e("br"),e("p",[o._v(o._s(o.msg))]),e("br"),e("br"),e("p",[e("v-btn",{on:{click:o.openCommonDialog}},[o._v("dialog test")])],1),e("common-dialog",{attrs:{dialog:o.dialog},on:{"close-common-dialog":o.closeCommonDialog}}),e("p",[e("v-btn",{on:{click:o.get_book}},[o._v("get book")])],1),e("p",[e("v-btn",{on:{click:o.callUtil}},[o._v("coll util")])],1),e("p",[e("v-btn",{on:{click:o.getUser}},[o._v("get user")]),o._v(" / "),e("v-btn",{on:{click:o.postUser}},[o._v("post user")]),o._v(" / "),e("v-btn",{on:{click:o.deleteUser}},[o._v("delete user")])],1)],1)},Mo=[];function Go(){console.log("util vue ")}var Qo={name:"Home",props:{books:Array,users:Array,borrowing:Array},components:{"common-dialog":w},data:function(){return{msg:"abc",dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{getUser:function(){var o="/users",t={id:"0",keyword:""};this.axios.get(o,t).then((function(o){console.log(o)})).catch((function(o){console.log(o)}))},postUser:function(){var o="/users",t={id:"8",name:"Dante Alghieri aaa",email:"dalghieriaaa@dummy.com"};this.axios.post(o,t).then((function(o){console.log(o)})).catch((function(o){console.log(o)}))},deleteUser:function(){var o="/users/6";this.axios.delete(o).then((function(o){console.log(o)})).catch((function(o){console.log(o)}))},callUtil:function(){console.log("btn clicked"),Go()},get_book:function(){var o="https://iss.ndl.go.jp/api/opensearch?isbn=9784167105822&cnt=1";this.axios.get(o,{timeout:5e3,responseType:"document"}).then((function(o){var t=o.data,e=t.search(/<item>/i),n=t.search(/<\/item>/i),s=t.slice(e+6,n),i=s.search(/<title>/i),r=s.search(/<\/title>/i),a=s.slice(i+7,r);console.log("title : "+a);var l=s.search(/<author>/i),c=s.search(/<\/author>/i),u=s.slice(l+8,c);console.log("author : "+u)})).catch((function(o){console.log(o)}))},openCommonDialog:function(){this.dialog.msg="test test test",this.dialog.on=!0},closeCommonDialog:function(o){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+o),t&&this.$router.push(t)},myEventHandler1:function(){},myEventHandler2:function(){null!=this.msg&&5===this.msg.length&&(console.log("handler2: "+this.msg),this.msg="")}},watch:{msg:function(o){null!=o&&5===o.length&&(console.log(this.msg),this.msg="")}}},Wo=Qo,Zo=Object(g["a"])(Wo,Po,Mo,!1,null,null,null),Xo=Zo.exports;m()(Zo,{VBtn:b["a"],VIcon:_o["a"],VTextField:io["a"]}),n["a"].use(P["a"]);var qo=[{path:"/",name:"Home",component:K},{path:"/borrowing",name:"Borrowing",component:ao},{path:"/returning",name:"Returning",component:mo},{path:"/booksearch",name:"BookSearch",component:wo},{path:"/bookedit/:isbn",name:"BookEdit",component:To},{path:"/usersearch",name:"UserSearch",component:jo},{path:"/useredit/:id",name:"UserEdit",component:Lo},{path:"/testa",name:"TestA",component:Xo},{path:"*",redirect:"/"}],Ko=new P["a"]({mode:"history",base:"/",routes:qo}),Yo=Ko,ot=e("f309");n["a"].use(ot["a"]);var tt=new ot["a"]({}),et=e("bc3a"),nt=e.n(et),st=e("130e"),it=e("a925"),rt=e("f0eb");n["a"].config.productionTip=!1,n["a"].use(st["a"],nt.a),n["a"].use(it["a"]);var at=new it["a"]({locale:"ja",messages:{ja:e("e299"),en:e("ab60"),it:e("f3f4")}});n["a"].use(rt["default"]),new n["a"]({router:Yo,vuetify:tt,i18n:at,render:function(o){return o(L)}}).$mount("#app")},"5c0b":function(o,t,e){"use strict";e("9c0c")},"9c0c":function(o,t,e){},ab60:function(o){o.exports=JSON.parse('{"app_name":"Open Bookcase","hello":"Hello !","btn_home":"Home","btn_borrowing":"Borrowing","btn_returning":"Returning","btn_booksearch":"Books","btn_usersearch":"Users","btn_reset":"Reset"}')},e299:function(o){o.exports=JSON.parse('{"app_name":"みんなの本棚","hello":"こんにちは","btn_home":"ホーム","btn_borrowing":"貸出","btn_returning":"返却","btn_booksearch":"図書","btn_usersearch":"利用者","btn_reset":"リセット"}')},f3f4:function(o){o.exports=JSON.parse('{"app_name":"Scaffale per tutti","hello":"Buon giorno !","btn_home":"Home","btn_borrowing":"Prestito","btn_returning":"Restituzione","btn_booksearch":"Libri","btn_usersearch":"Utenti","btn_reset":"ripristino"}')}});
//# sourceMappingURL=app.4b4ed2b0.js.map