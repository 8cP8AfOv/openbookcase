(function(e){function t(t){for(var r,i,a=t[0],l=t[1],c=t[2],d=0,g=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&g.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(g.length)g.shift()();return s.push.apply(s,c||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],r=!0,a=1;a<o.length;a++){var l=o[a];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var r={},n={app:0},s=[];function i(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=r,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(o,r,function(t){return e[t]}.bind(null,r));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var u=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("Header",{attrs:{langs:e.langs},on:{"delete-local-strage":e.deleteLocalStrage}}),o("v-main",[o("v-container",[o("router-view",{attrs:{books:e.books,users:e.users,borrowing:e.borrowing},on:{"update-books":e.updateBooks,"update-users":e.updateUsers,"add-borrowing":e.addBorrowing,"del-borrowing":e.delBorrowing}})],1)],1),o("Footer")],1)},s=[],i=(o("c740"),o("a434"),o("d3b7"),o("b0c0"),o("99af"),o("e9c4"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-app-bar",{attrs:{app:"",color:"primary",dark:"",elevation:"4"}},[o("v-toolbar-title",[e._v(" "+e._s(e.$t("app_name")))]),o("v-spacer"),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Home"===this.$route.name},on:{click:e.goToHome}},[e._v(e._s(e.$t("btn_home")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Borrowing"===this.$route.name},on:{click:e.goToBorrowing}},[e._v(e._s(e.$t("btn_borrowing")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Returning"===this.$route.name},on:{click:e.goToReturning}},[e._v(e._s(e.$t("btn_returning")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"BookSearch"===this.$route.name},on:{click:e.goToBookSearch}},[e._v(e._s(e.$t("btn_booksearch")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"UserSearch"===this.$route.name},on:{click:e.goToUserSearch}},[e._v(e._s(e.$t("btn_usersearch")))]),o("v-spacer"),o("v-btn",{attrs:{color:"error"},on:{click:e.deleteLocalStrage}},[e._v(e._s(e.$t("btn_reset")))]),o("img",{attrs:{src:e.lang_img,width:"50"},on:{click:e.changeLang}})],1)],1)}),a=[],l={name:"Header",props:{langs:Array},data:function(){return{lang_img:""}},mounted:function(){this.lang_img=this.$i18n.locale+".png"},methods:{deleteLocalStrage:function(){this.$emit("delete-local-strage")},changeLang:function(){var e=this,t=this.langs.findIndex((function(t){return t===e.$i18n.locale})),o=(t+1)%this.langs.length;this.$i18n.locale=this.langs[o],this.lang_img=this.langs[o]+".png"},goToHome:function(){"Home"!==this.$route.name&&this.$router.push("/")},goToBorrowing:function(){"Borrowing"!==this.$route.name&&this.$router.push("/borrowing")},goToReturning:function(){"Returning"!==this.$route.name&&this.$router.push("/returning")},goToBookSearch:function(){"BookSearch"!==this.$route.name&&this.$router.push("/booksearch")},goToUserSearch:function(){"UserSearch"!==this.$route.name&&this.$router.push("/usersearch")}}},c=l,u=o("2877"),d=o("6544"),g=o.n(d),b=o("40dc"),h=o("8336"),m=o("2fa4"),v=o("2a7f"),_=Object(u["a"])(c,i,a,!1,null,null,null),p=_.exports;g()(_,{VAppBar:b["a"],VBtn:h["a"],VSpacer:m["a"],VToolbarTitle:v["a"]});var f=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},k=[],w={},x=w,y=Object(u["a"])(x,f,k,!1,null,null,null),S=y.exports,B="books",V="users",A="borrowing",I={name:"App",components:{Header:p,Footer:S},data:function(){return{books:[],users:[],borrowing:[],langs:["ja","en","it"],default_books:[{isbn:"9788867582143",title:"I promessi sposi",image:"http://books.google.com/books/content?id=vIXxzQEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780143106272",title:"Great Expectations",image:"http://books.google.com/books/content?id=IBspDwAAQBAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9784094087871",title:"坊っちゃん",image:"http://books.google.com/books/content?id=6XV2lAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9784003107638",title:"銀河鉄道の夜他十四篇(童話集)",image:"http://books.google.com/books/content?id=pMJmPwAACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9788807901119",title:"Pinocchio",image:"http://books.google.com/books/content?id=QimZoAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9781948132824",title:"The Adventures of Tom Sawyer",image:"http://books.google.com/books/content?id=72sitwEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780316769532",title:"The Catcher in the Rye",image:"http://books.google.com/books/content?id=m3GzoAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api"},{isbn:"9780544133228",title:"Marcovaldo",image:"http://books.google.com/books/content?id=iGA4mhtQWD8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9784862392930",title:"スティル・ライフ",image:"http://books.google.com/books/content?id=m_UACgAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9788807813023",title:"Novecento",image:"http://books.google.com/books/content?id=gNZzQIE3EUAC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"},{isbn:"9780345803054",title:"Breakfast at Tiffany's",image:"http://books.google.com/books/content?id=UwWWh1WLn9EC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api"}],default_users:[{id:1,name:"Alessandro Manzoni",email:"amanzoni@dummy.com"},{id:2,name:"Charles Dickens",email:"cdickends@dummy.com"},{id:3,name:"夏目 漱石",email:"snatsume@dummy.com"}],default_borrowing:[{book_isbn:"9788867582143",user_id:1,create_datetime:"2022-05-24T01:04:49.813Z"},{book_isbn:"9780143106272",user_id:1,create_datetime:"2022-05-24T01:04:49.813Z"}]}},mounted:function(){if(this.$i18n.locale=this.langs[0],localStorage.getItem(B))try{this.books=JSON.parse(localStorage.getItem(B))}catch(e){localStorage.removeItem(B)}if(this.books.length||(this.books=this.default_books,this.saveBooks()),localStorage.getItem(V))try{this.users=JSON.parse(localStorage.getItem(V))}catch(e){localStorage.removeItem(V)}if(this.users.length||(this.users=this.default_users,this.saveUsers()),localStorage.getItem(A))try{this.borrowing=JSON.parse(localStorage.getItem(A))}catch(e){localStorage.removeItem(A)}this.borrowing.length||(this.borrowing=this.default_borrowing,this.saveBorrowing())},methods:{updateBooks:function(e){var t=this.books.findIndex((function(t){return t.isbn===e.isbn}));this.books.splice(t,1,e),this.saveBooks()},updateUsers:function(e){var t=e.id?e.id:this.users.reduce((function(e,t){return e>t.id?e:t.id}),0)+1,o={id:t,name:e.name,email:e.email},r=this.users.findIndex((function(e){return e.id===t}));this.users.splice(r,1,o),this.saveUsers()},addBorrowing:function(e){this.borrowing=this.borrowing.concat(e),this.saveBorrowing()},delBorrowing:function(e){for(var t=this,o=function(o){var r=t.borrowing.findIndex((function(t){return t.book_isbn==e[o].isbn}));t.borrowing.splice(r,1)},r=0;r<e.length;r++)o(r);this.saveBorrowing()},saveBooks:function(){var e=JSON.stringify(this.books);localStorage.setItem(B,e)},saveUsers:function(){var e=JSON.stringify(this.users);localStorage.setItem(V,e)},saveBorrowing:function(){var e=JSON.stringify(this.borrowing);localStorage.setItem(A,e)},deleteLocalStrage:function(){var e="delete all data ?";window.confirm(e)&&(localStorage.setItem(B,""),localStorage.removeItem(B),localStorage.setItem(V,""),localStorage.removeItem(V),localStorage.setItem(A,""),localStorage.removeItem(A),this.books=[],this.users=[],this.borrowing=[],window.location.reload)}}},$=I,T=o("7496"),C=o("a523"),E=o("f6c4"),O=Object(u["a"])($,n,s,!1,null,null,null),N=O.exports;g()(O,{VApp:T["a"],VContainer:C["a"],VMain:E["a"]});var j=o("8c4f"),U=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v(e._s(e.$t("hello")))]),o("br"),e._m(0),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"3"}},[o("h3",[e._v("主な機能")]),o("ul",[o("li",[e._v("蔵書の登録・検索")]),o("li",[e._v("利用者の登録・検索")]),o("li",[e._v("貸出と返却の処理")])])]),o("v-col",{attrs:{cols:"3"}},[o("h3",[e._v("開発環境")]),o("ul",[o("li",[e._v("npm 8.1.2")]),o("li",[e._v("node.js 16.13.2")]),o("li",[e._v("express.js 4.18.1")]),o("li",[e._v("vue.js 2.6.11")])])]),o("v-col",{attrs:{cols:"6"}})],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("p",[e._v(" 使う人・団体によって必要となる機能は異なりますが、これから最低限すべき作業は、 "),o("ul",[o("li",[e._v("ログイン画面設置、バリデーションチェックなどのセキュリティ対応")]),o("li",[e._v("データベースの準備とバックエンドの実装")]),o("li",[e._v("利用者向け画面の追加")]),o("li",[e._v("翻訳やバグ取り")])]),e._v(" といったところでしょうか。"),o("br"),e._v(" また、蔵書登録の際、GoogleBooks API を利用して書誌情報を取得していますが、国内で出版された書籍については、"),o("br"),e._v(" 国立国会図書館のサービス（https://iss.ndl.go.jp/information/api/）の方が網羅性が高く、お勧めです。"),o("br"),e._v(" WEBサーバ・DBサーバを立てるのが難しい場合、Electron アプリとしてインストールし、スタンドアローンで使う手もあります。 ")])]),o("v-col",{attrs:{cols:"6"}})],1)],1)],1)},R=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v("フロントエンドのフレームワーク Vue.js の学習の一環として、書籍をISBNで管理する、簡単な蔵書管理アプリを作成しました。"),o("br"),e._v(" Ubuntu 18.04 , GoogleChrome 101.0（64 ビット）で動作確認しています。"),o("br"),e._v(" ISBNは、バーコードリーダーで読み取ることを想定していますが、リーダーを持っていないため、このテストは実施できません。"),o("br"),e._v(" データは、WEBストレージ（localStorage）に格納しています。"),o("br")])}],D={name:"Home",props:{books:Array,users:Array,borrowing:Array},data:function(){return{msg:""}},methods:{},watch:{}},J=D,z=o("62ad"),F=o("0fd9"),H=Object(u["a"])(J,U,R,!1,null,null,null),P=H.exports;g()(H,{VCol:z["a"],VContainer:C["a"],VRow:F["a"]});var L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("貸出")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"user id",outlined:""},on:{change:e.getUser},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1),o("v-col",{attrs:{cols:"6"}},[e._v(" "+e._s(e.user.name)),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"ISBN",outlined:""},on:{input:e.getBook},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:e.execBorrowing}},[e._v("貸出")]),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.new_borrowing_books.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th")])]),o("tbody",e._l(e.new_borrowing_books,(function(t,r){return o("tr",{key:t.isbn},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[o("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return e.cancel(r)}}},[e._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,3697624433)}):e._e()],1),o("br"),o("br"),o("br"),o("br"),o("v-card",{attrs:{elevation:"2"}},[e.borrowed_books.length?o("v-simple-table",[o("caption",[e._v("貸出中の図書")]),o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th",{staticClass:"text-left"},[e._v("Date")]),o("th")])]),o("tbody",e._l(e.borrowed_books,(function(t){return o("tr",{key:t.isbn},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[e._v(e._s(t.date))])])})),0)]):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}})],1)],1),o("v-dialog",{attrs:{"max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-text",[e._v(e._s(e.dialog_msg))]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){e.dialog=!1}}},[e._v("close")])],1)],1)],1)],1)},M=[],G=o("53ca"),Q=(o("7db0"),o("159b"),o("4de4"),o("25f0"),{name:"borrowing",props:{books:Array,users:Array,borrowing:Array},data:function(){return{user_id:"",isbn:"",user:{id:0,name:"",email:""},book:{isbn:"",title:"",image:""},new_borrowing_books:[],borrowed_books:[],dialog:!1,dialog_msg:""}},methods:{getUser:function(){if(0!=this.user_id.length){var e=parseInt(this.user_id);if(!isNaN(e)){var t=this.users.find((function(t){return t.id===e}));if(!t)return this.dialog_msg="この利用者IDは登録されていません。",void(this.dialog=!0);this.user=t,this.borrowed_books=this.getBorrowedBooksByUserId(e)}}},execBorrowing:function(){if(!this.user_id.length||!this.new_borrowing_books.length)return this.dialog_msg="利用者IDと貸出図書のISBNを入力して下さい。",void(this.dialog=!0);var e=[],t=this.user.id,o=new Date;this.new_borrowing_books.forEach((function(r){console.log("foreach"),console.log(r.title),console.log(t),e.push({user_id:t,book_isbn:r.isbn,create_datetime:o})})),this.$emit("add-borrowing",e),this.dialog_msg="貸出処理を実行しました。",this.dialog=!0,this.resetForm()},cancel:function(e){this.new_borrowing_books.splice(e,1)},resetForm:function(){this.user_id="",this.isbn="",this.user={id:0,name:"",email:""},this.book={isbn:"",title:"",image:""},this.new_borrowing_books=[],this.borrowed_books=[]},getBook:function(){console.log("getBook");var e=this.isbn;if(13===e.length){console.log("abc");var t=this.borrowing.some((function(t){return t.book_isbn===e}));if(console.log(e+" exist in borrowing:"+t),t)return console.log("check borrowing"),this.dialog_msg="貸し出し中の図書です。",this.dialog=!0,void(this.book="");var o=this.books.findIndex((function(t){return t.isbn===e}));if(console.log("book_index:"+o),-1==o)return console.log("check books"),this.dialog_msg="登録されていない図書です。",void(this.dialog=!0);this.book=this.books[o],console.log(this.book),this.new_borrowing_books.push(this.books[o])}},getBorrowedBooksByUserId:function(e){var t=this,o=this.borrowing.filter((function(t){return t.user_id===e}));console.log("userid: "+e),console.log("typeof"+Object(G["a"])(o)),console.log("toString:"+o.toString()),console.log("isarray: "+Array.isArray(o)),console.log("length:"+o.length),console.log("filtered_borrowing:"+o);for(var r=[],n={},s=function(e){n=t.books.find((function(t){return t.isbn===o[e].book_isbn}));var s=new Date(o[e].create_datetime);n.date=s.getFullYear()+"/"+(s.getMonth()+1)+"/"+s.getDate(),r.push(n)},i=0;i<o.length;i++)s(i);return r}},watch:{}}),W=Q,Z=o("b0af"),X=o("99d9"),q=o("169a"),Y=o("1f4f"),K=o("8654"),ee=Object(u["a"])(W,L,M,!1,null,null,null),te=ee.exports;g()(ee,{VBtn:h["a"],VCard:Z["a"],VCardActions:X["a"],VCardText:X["b"],VCol:z["a"],VContainer:C["a"],VDialog:q["a"],VRow:F["a"],VSimpleTable:Y["a"],VSpacer:m["a"],VTextField:K["a"]});var oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("返却")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"ISBN",outlined:""},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:e.execReturning}},[e._v("返却")]),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.new_returning_books.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th")])]),o("tbody",e._l(e.new_returning_books,(function(t,r){return o("tr",{key:t.isbn},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[o("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return e.cancel(r)}}},[e._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,2732754158)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}})],1)],1),o("v-dialog",{attrs:{"max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-text",[e._v(e._s(e.dialog_msg))]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.closeDialog}},[e._v("close")])],1)],1)],1)],1)},re=[],ne={name:"Returning",props:{books:Array,users:Array,borrowing:Array},data:function(){return{isbn:"",book:{isbn:"",title:"",image:""},new_returning_books:[],dialog:!1,dialog_msg:""}},methods:{cancel:function(e){this.new_returning_books.splice(e,1)},execReturning:function(){if(!this.new_returning_books.length)return this.dialog_msg="返却図書のISBNを入力して下さい。",void(this.dialog=!0);var e=this.new_returning_books;this.$emit("del-borrowing",e),this.new_returning_books=[],this.dialog_msg="返却処理を実行しました。",this.dialog=!0,this.resetForm()},resetForm:function(){this.isbn="",this.book={isbn:"",title:"",image:""},this.new_returning_books=[]},closeDialog:function(){this.dialog=!1}},watch:{isbn:function(e){if(13===e.length){var t=this.books.findIndex((function(t){return t.isbn===e}));if(console.log("book_index: "+t),-1==t)return this.dialog_msg="登録されていない図書です。",void(this.dialog=!0);var o=this.borrowing.some((function(t){return t.book_isbn===e}));if(console.log("exist_borrowing: "+o),!o)return this.dialog_msg="貸し出されていない図書です。",void(this.dialog=!0);this.book=this.books[t],this.new_returning_books.push(this.books[t])}}}},se=ne,ie=Object(u["a"])(se,oe,re,!1,null,null,null),ae=ie.exports;g()(ie,{VBtn:h["a"],VCard:Z["a"],VCardActions:X["a"],VCardText:X["b"],VCol:z["a"],VContainer:C["a"],VDialog:q["a"],VRow:F["a"],VSimpleTable:Y["a"],VSpacer:m["a"],VTextField:K["a"]});var le=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("蔵書検索")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"7",sm:"4"}},[o("v-text-field",{attrs:{label:"title",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":e.searchBook},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),o("v-col",{attrs:{cols:"1",sm:"1"}},[o("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return e.editBook("0")}}},[o("v-icon",[e._v(" mdi-plus ")])],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.search_result.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")])])]),o("tbody",e._l(e.search_result,(function(t){return o("tr",{key:t.isbn,on:{click:function(o){return e.editBook(t.isbn)}}},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))])])})),0)]},proxy:!0}],null,!1,2709981472)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1)],1)],1)},ce=[],ue=(o("4d63"),o("c607"),o("ac1f"),o("2c3e"),o("00b4"),{name:"BookSearch",props:{books:Array,users:Array,borrowing:Array},data:function(){return{title:"",search_result:[]}},methods:{searchBook:function(){var e=new RegExp(this.title,"i");this.search_result=this.books.filter((function(t){return e.test(t.title)}))},editBook:function(e){this.$router.push("/bookedit/".concat(e))}}}),de=ue,ge=o("132d"),be=Object(u["a"])(de,le,ce,!1,null,null,null),he=be.exports;g()(be,{VBtn:h["a"],VCard:Z["a"],VCol:z["a"],VContainer:C["a"],VIcon:ge["a"],VRow:F["a"],VSimpleTable:Y["a"],VSpacer:m["a"],VTextField:K["a"]});var me=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v(e._s(e.execType))]),o("v-card",{attrs:{elevation:"2"}},[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-img",{attrs:{src:e.book.image,width:"200"}})],1),o("v-col",{attrs:{cols:"8"}},[o("v-text-field",{attrs:{id:"isbn",label:"ISBN",outlined:"",readonly:e.editmode},on:{input:e.checkISBN},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}}),o("br"),o("v-text-field",{attrs:{label:"Title",outlined:""},model:{value:e.book.title,callback:function(t){e.$set(e.book,"title",t)},expression:"book.title"}}),o("br"),o("p",{directives:[{name:"show",rawName:"v-show",value:e.book_status,expression:"book_status"}]},[e._v(" 状態："+e._s(e.book_status)+" "),o("br")]),o("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:e.updateBook}},[e._v(e._s(e.execType))])],1)],1)],1),o("v-dialog",{attrs:{"max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-text",[e._v(e._s(e.dialog_msg))]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.closeDialog}},[e._v("close")])],1)],1)],1)],1)},ve=[],_e=o("1da1"),pe=(o("96cf"),o("3ca3"),o("ddb0"),o("9861"),{name:"BookEdit",props:{books:Array,users:Array,borrowing:Array},data:function(){return{book:{isbn:"",title:"",image:"no-image.png"},editmode:!1,isbn:"",execType:"",dialog:!1,dialog_msg:"",go_search:!0,book_status:""}},methods:{updateBook:function(){if(console.log(this.book),!this.book.isbn||!this.book.title)return this.go_search=!1,this.dialog_msg="ISBNを入力して下さい。",void(this.dialog=!0);this.$emit("update-books",this.book),this.dialog_msg=this.execType+"処理を実行しました。",this.dialog=!0},resetForm:function(){this.book={isbn:"",title:"",image:"no-image.png"},this.isbn=""},closeDialog:function(){this.dialog=!1,this.go_search&&this.$router.push("/booksearch")},checkISBN:function(){var e=this;if(!this.editmode&&13===this.isbn.length){var t=this.books.some((function(t){return t.isbn==e.isbn}));if(t)return this.go_search=!1,this.dialog_msg="すでに登録済みです。",void(this.dialog=!0);var o=this.isbn;console.log(o),this.isbn="",this.getBookInfo(o)}},getBookInfo:function(e){var t=this;return Object(_e["a"])(regeneratorRuntime.mark((function o(){var r,n,s,i,a,l,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("getBookInfo"),t.searchResults=[],r="https://www.googleapis.com/books/v1/volumes?",n={q:"isbn:".concat(e),maxResults:1},s=new URLSearchParams(n),o.next=7,fetch(r+s).then((function(e){return e.json()}));case 7:if(i=o.sent,0!=i.totalItems){o.next=12;break}return t.dialog_message="ISBN non found in Google Books",t.dialog=!0,o.abrupt("return");case 12:console.log(i.items),a=i.items[0].volumeInfo,console.log(a),l=a.title?a.title:"",c=a.imageLinks.thumbnail?a.imageLinks.thumbnail:"",t.book.isbn=e,t.book.title=l,t.book.image=c;case 20:case"end":return o.stop()}}),o)})))()}},mounted:function(){var e=this.$route.params.isbn;"0"==e?(this.isbn="",this.editmode=!1,this.execType="登録",this.book_status=""):(console.log("isbn: "+e),this.isbn=e,this.editmode=!0,this.book=this.books.find((function(t){return t.isbn===e})),console.log(this.book),this.execType="更新",this.borrowing.some((function(t){return t.book_isbn===e}))?this.book_status="貸出中":this.book_status="在架")}}),fe=pe,ke=o("adda"),we=Object(u["a"])(fe,me,ve,!1,null,null,null),xe=we.exports;g()(we,{VBtn:h["a"],VCard:Z["a"],VCardActions:X["a"],VCardText:X["b"],VCol:z["a"],VDialog:q["a"],VImg:ke["a"],VRow:F["a"],VSpacer:m["a"],VTextField:K["a"]});var ye=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("利用者検索")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"7",sm:"4"}},[o("v-text-field",{attrs:{label:"name",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":e.searchUser},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),o("v-col",{attrs:{cols:"1",sm:"1"}},[o("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return e.editUser(0)}}},[o("v-icon",[e._v(" mdi-plus ")])],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.search_result.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ID")]),o("th",{staticClass:"text-left"},[e._v("Name ")]),o("th",{staticClass:"test-left"},[e._v("E-mail")])])]),o("tbody",e._l(e.search_result,(function(t){return o("tr",{key:t.id,on:{click:function(o){return e.editUser(t.id)}}},[o("td",[e._v(e._s(t.id))]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.email))])])})),0)]},proxy:!0}],null,!1,1306142549)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1)],1)],1)},Se=[],Be={name:"UserSearch",props:{books:Array,users:Array,borrowing:Array},data:function(){return{name:"",search_result:[]}},methods:{searchUser:function(){var e=new RegExp(this.name,"i");this.search_result=this.users.filter((function(t){return e.test(t.name)}))},editUser:function(e){this.$router.push("/useredit/".concat(e))}}},Ve=Be,Ae=Object(u["a"])(Ve,ye,Se,!1,null,null,null),Ie=Ae.exports;g()(Ae,{VBtn:h["a"],VCard:Z["a"],VCol:z["a"],VContainer:C["a"],VIcon:ge["a"],VRow:F["a"],VSimpleTable:Y["a"],VSpacer:m["a"],VTextField:K["a"]});var $e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v(e._s(e.execType))]),o("v-card",{attrs:{elevation:"2"}},[o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"更新"==e.execType,expression:"execType == '更新'"}],attrs:{label:"ID",outlined:"",readonly:""},model:{value:e.user.id,callback:function(t){e.$set(e.user,"id",t)},expression:"user.id"}}),o("br"),o("v-text-field",{attrs:{label:"Name",outlined:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),o("br"),o("v-text-field",{attrs:{label:"E-mail",outlined:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),o("v-col",{attrs:{cols:"8"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:e.updateUser}},[e._v(e._s(e.execType))])],1)],1)],1),o("v-dialog",{attrs:{"max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[o("v-card",[o("v-card-text",[e._v(e._s(e.dialog_msg))]),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:e.closeDialog}},[e._v("close")])],1)],1)],1)],1)},Te=[],Ce={name:"UserEdit",props:{books:Array,users:Array,borrowing:Array},data:function(){return{user:{id:0,name:"",email:""},execType:"",dialog:!1,dialog_msg:"",go_search:!0}},methods:{resetForm:function(){this.user={id:0,name:"",email:""}},updateUser:function(){var e=this,t=this.users.some((function(t){return t.email==e.user.email}));if(!this.user.id&&t)return this.go_search=!1,this.dialog_msg="このメールアドレスは、すでに登録済みです。",void(this.dialog=!0);this.$emit("update-users",this.user),this.dialog_msg=this.execType+"処理を実行しました。",this.dialog=!0},closeDialog:function(){this.dialog=!1,this.go_search&&this.$router.push("/usersearch")}},mounted:function(){console.log(this.$route.params.id);var e=1*this.$route.params.id;0!==e?(this.execType="更新",this.user=this.users.find((function(t){return t.id===e}))):this.execType="登録"}},Ee=Ce,Oe=Object(u["a"])(Ee,$e,Te,!1,null,null,null),Ne=Oe.exports;g()(Oe,{VBtn:h["a"],VCard:Z["a"],VCardActions:X["a"],VCardText:X["b"],VCol:z["a"],VDialog:q["a"],VRow:F["a"],VSpacer:m["a"],VTextField:K["a"]});var je=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v(" "+e._s(e.$t("hello"))),o("br"),o("v-text-field",{attrs:{clearable:"",id:"myid"},on:{paste:e.myEventHandler2},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),o("br"),o("v-icon",[e._v("mdi-plus")]),o("v-icon",[e._v("mdi-open-in-new")]),o("v-icon",[e._v("mdi-pencil")]),o("br"),e._v(" "+e._s(e.msg)+" ")],1)},Ue=[],Re={name:"Home",props:{books:Array,users:Array,borrowing:Array},data:function(){return{msg:"abc"}},methods:{myEventHandler1:function(){},myEventHandler2:function(){null!=this.msg&&5===this.msg.length&&(console.log("handler2: "+this.msg),this.msg="")}},watch:{msg:function(e){null!=e&&5===e.length&&(console.log(this.msg),this.msg="")}}},De=Re,Je=Object(u["a"])(De,je,Ue,!1,null,null,null),ze=Je.exports;g()(Je,{VIcon:ge["a"],VTextField:K["a"]}),r["a"].use(j["a"]);var Fe=[{path:"/",name:"Home",component:P},{path:"/borrowing",name:"Borrowing",component:te},{path:"/returning",name:"Returning",component:ae},{path:"/booksearch",name:"BookSearch",component:he},{path:"/bookedit/:isbn",name:"BookEdit",component:xe},{path:"/usersearch",name:"UserSearch",component:Ie},{path:"/useredit/:id",name:"UserEdit",component:Ne},{path:"/testa",name:"TestA",component:ze},{path:"*",redirect:"/"}],He=new j["a"]({mode:"history",base:"/",routes:Fe}),Pe=He,Le=o("f309");r["a"].use(Le["a"]);var Me=new Le["a"]({}),Ge=o("bc3a"),Qe=o.n(Ge),We=o("130e"),Ze=o("a925");r["a"].config.productionTip=!1,r["a"].use(We["a"],Qe.a),r["a"].use(Ze["a"]);var Xe=new Ze["a"]({locale:"ja",messages:{ja:o("e299"),en:o("ab60"),it:o("f3f4")}});new r["a"]({router:Pe,vuetify:Me,i18n:Xe,render:function(e){return e(N)}}).$mount("#app")},ab60:function(e){e.exports=JSON.parse('{"app_name":"Open Bookcase","hello":"Hello !","btn_home":"Home","btn_borrowing":"Borrowing","btn_returning":"Returning","btn_booksearch":"Books","btn_usersearch":"Users","btn_reset":"Reset"}')},e299:function(e){e.exports=JSON.parse('{"app_name":"みんなの本棚","hello":"こんにちは","btn_home":"ホーム","btn_borrowing":"貸出","btn_returning":"返却","btn_booksearch":"図書","btn_usersearch":"利用者","btn_reset":"リセット"}')},f3f4:function(e){e.exports=JSON.parse('{"app_name":"Scaffale per tutti","hello":"Buon giorno !","btn_home":"Home","btn_borrowing":"Prestito","btn_returning":"Restituzione","btn_booksearch":"Libri","btn_usersearch":"Utenti","btn_reset":"ripristino"}')}});
//# sourceMappingURL=app.6dcc9a25.js.map