(function(e){function t(t){for(var n,s,i=t[0],l=t[1],c=t[2],d=0,g=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&g.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(g.length)g.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,i=1;i<o.length;i++){var l=o[i];0!==r[l]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},r={app:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("Header",{attrs:{langs:e.langs}}),o("v-main",[o("v-container",[o("vue-page-transition",{attrs:{name:"fade"}},[o("router-view")],1)],1)],1),o("Footer")],1)},a=[],s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-app-bar",{attrs:{app:"",color:"primary",dark:"",elevation:"4"}},[o("v-toolbar-title",[e._v(" "+e._s(e.$t("app_name")))]),o("v-spacer"),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Home"===this.$route.name},on:{click:e.goToHome}},[e._v(e._s(e.$t("btn_home")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Borrowing"===this.$route.name},on:{click:e.goToBorrowing}},[e._v(e._s(e.$t("btn_borrowing")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"Returning"===this.$route.name},on:{click:e.goToReturning}},[e._v(e._s(e.$t("btn_returning")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"BookSearch"===this.$route.name},on:{click:e.goToBookSearch}},[e._v(e._s(e.$t("btn_booksearch")))]),o("v-btn",{attrs:{text:"",rounded:"",disabled:"UserSearch"===this.$route.name},on:{click:e.goToUserSearch}},[e._v(e._s(e.$t("btn_usersearch")))]),o("v-spacer"),o("img",{attrs:{src:e.lang_img,width:"50"},on:{click:e.changeLang}})],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}})],1)},i=[],l=(o("c740"),o("b0c0"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{"max-width":"300"},model:{value:e.dialog.on,callback:function(t){e.$set(e.dialog,"on",t)},expression:"dialog.on"}},[o("v-card",[o("v-card-text",[e._v(e._s(e.dialog.msg))]),o("v-card-actions",[o("v-spacer"),"notice"===e.dialog.type?o("div",[o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.closeDialog()}}},[e._v("close")])],1):"confirm"===e.dialog.type?o("div",[o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.closeDialog(!0)}}},[e._v("OK")]),o("v-btn",{attrs:{color:"primary",rounded:""},on:{click:function(t){return e.closeDialog(!1)}}},[e._v("cancel")])],1):e._e()],1)],1)],1)}),c=[],u={name:"CommonDialog",props:{dialog:Object},data:function(){return{}},methods:{closeDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("close-common-dialog",e)}}},d=u,g=o("2877"),h=o("6544"),m=o.n(h),v=o("8336"),b=o("b0af"),p=o("99d9"),f=o("169a"),_=o("2fa4"),k=Object(g["a"])(d,l,c,!1,null,null,null),w=k.exports;m()(k,{VBtn:v["a"],VCard:b["a"],VCardActions:p["a"],VCardText:p["b"],VDialog:f["a"],VSpacer:_["a"]});var x={name:"Header",props:{langs:Array},components:{"common-dialog":w},data:function(){return{lang_img:"",dialog:{on:!1,msg:"",type:"notice",to:""}}},mounted:function(){this.lang_img=this.$i18n.locale+".png"},methods:{changeLang:function(){var e=this,t=this.langs.findIndex((function(t){return t===e.$i18n.locale})),o=(t+1)%this.langs.length;this.$i18n.locale=this.langs[o],this.lang_img=this.langs[o]+".png"},goToHome:function(){"Home"!==this.$route.name&&this.$router.push("/")},goToBorrowing:function(){"Borrowing"!==this.$route.name&&this.$router.push("/borrowing")},goToReturning:function(){"Returning"!==this.$route.name&&this.$router.push("/returning")},goToBookSearch:function(){"BookSearch"!==this.$route.name&&this.$router.push("/booksearch")},goToUserSearch:function(){"UserSearch"!==this.$route.name&&this.$router.push("/usersearch")},resetDB:function(){this.dialog.msg="データをリセットしますか？",this.dialog.type="confirm",this.dialog.to="/",this.dialog.on=!0},closeCommonDialog:function(e){this.dialog.to="",this.dialog.on=!1,e&&console.log("clicked reset button")}}},y=x,B=o("40dc"),V=o("2a7f"),S=Object(g["a"])(y,s,i,!1,null,null,null),$=S.exports;m()(S,{VAppBar:B["a"],VBtn:v["a"],VSpacer:_["a"],VToolbarTitle:V["a"]});var C=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},T=[],R={},j=R,O=Object(g["a"])(j,C,T,!1,null,null,null),U=O.exports,I={name:"App",components:{Header:$,Footer:U},data:function(){return{langs:["ja","en","it"]}},mounted:function(){this.$i18n.locale=this.langs[0]},methods:{}},N=I,D=(o("5c0b"),o("7496")),E=o("a523"),P=o("f6c4"),F=Object(g["a"])(N,r,a,!1,null,null,null),H=F.exports;m()(F,{VApp:D["a"],VContainer:E["a"],VMain:P["a"]});var A=o("8c4f"),L=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h2",[e._v(e._s(e.$t("hello")))]),o("br"),o("h3",[e._v("みんなの本棚")]),e._m(0),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"3"}},[o("h3",[e._v("主な機能")]),o("ul",[o("li",[e._v("蔵書の登録・検索")]),o("li",[e._v("利用者の登録・検索")]),o("li",[e._v("貸出と返却の処理")])])]),o("v-col",{attrs:{cols:"6"}})],1),o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("p",[e._v(" ユーザーによって必要となる機能は異なりますが、いずれの場合にも必要となる作業は、 "),o("ul",[o("li",[e._v("ログイン画面設置、バリデーションなどのセキュリティ対応")]),o("li",[e._v("利用者向け画面の追加")]),o("li",[e._v("翻訳やバグ取り")])]),e._v(" といったところでしょうか。"),o("br"),e._v(" サーバを立てる・借りるのが難しい場合、Electron アプリとしてインストールし、スタンドアローンで使う手もあります。 ")])]),o("v-col",{attrs:{cols:"6"}})],1)],1),o("h3",[e._v("3D表示")]),o("p",[e._v("Three.js を学びながら作成した課題作品です。このライブラリの基本的な使用例として参考になるでしょう。")]),e._m(1),o("router-link",{attrs:{to:"/testa"}},[e._v("test")])],1)},J=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("p",[e._v("フロントエンドのフレームワーク Vue.js 2 の学習の一環として、書籍をISBNで管理する、簡単な蔵書管理アプリを作成しました。"),o("br"),e._v(" Ubuntu 18.04 , GoogleChrome 101.0（64 ビット）で動作確認しています。"),o("br"),e._v(" ISBNは、バーコードリーダーで読み取ることを想定していますが、リーダーを持っていないので、テストしていません。"),o("br"),e._v(" データは Postgresql に格納し、WEBサーバには node.js と express.js を使っています。"),o("br")])},function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",[o("li",[o("a",{attrs:{href:"three/three1.html"}},[e._v("作品１")])]),o("li",[o("a",{attrs:{href:"three/three2.html"}},[e._v("作品２")])]),o("li",[o("a",{attrs:{href:"three/three3.html"}},[e._v("作品３")])])])}],M={name:"Home",props:{},data:function(){return{msg:""}},methods:{},watch:{}},G=M,q=o("62ad"),z=o("0fd9"),K=Object(g["a"])(G,L,J,!1,null,null,null),W=K.exports;m()(K,{VCol:q["a"],VContainer:E["a"],VRow:z["a"]});var Q=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("貸出")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"user id",outlined:""},on:{change:e.searchUser},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1),o("v-col",{attrs:{cols:"6"}},[e._v(" "+e._s(e.user.name)),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"ISBN",outlined:""},on:{input:e.addToCart},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:e.execBorrowing}},[e._v("貸出")]),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.new_borrowing_books.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th",{staticClass:"text-left"},[e._v("Authors ")]),o("th")])]),o("tbody",e._l(e.new_borrowing_books,(function(t,n){return o("tr",{key:t.isbn},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[e._v(e._s(t.authors))]),o("td",[o("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return e.cancel(n)}}},[e._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,1519622458)}):e._e()],1),o("br"),o("br"),o("br"),o("br"),o("v-card",{attrs:{elevation:"2"}},[e.borrowed_books.length?o("v-simple-table",[o("caption",[e._v("貸出中の図書")]),o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th",{staticClass:"text-left"},[e._v("Authors ")]),o("th",{staticClass:"text-left"},[e._v("Date")]),o("th")])]),o("tbody",e._l(e.borrowed_books,(function(t){return o("tr",{key:t.id},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[e._v(e._s(t.authors))]),o("td",[e._v(e._s(t.create_timestamp))])])})),0)]):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}})],1)],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}})],1)},X=[],Y=o("1da1"),Z=(o("d3b7"),o("159b"),o("a434"),o("96cf"),o("e9c4"),o("bc3a")),ee=o.n(Z),te="/users",oe="/books",ne="/borrowing";function re(){console.log("Util myFunc")}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e=parseInt(e),isNaN(e)&&(e=0),new Promise((function(o,n){ee.a.get(te,{params:{id:e,keyword:t}}).then((function(e){o(e.data)})).catch((function(e){console.log(e),n(e)})).then((function(){}))}))}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,name:"",email:""};return new Promise((function(t,o){ee.a.post(te,e).then((function(e){t(e.data)})).catch((function(e){console.log(e),o(e)})).then((function(){}))}))}function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={id:e,isbn:t,keyword:o};return new Promise((function(e,t){ee.a.get(oe,{params:n}).then((function(t){console.log(t.data),e(t.data)})).catch((function(e){console.log(e),t(e)})).then((function(){}))}))}function le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:0,isbn:"",title:"",authors:"",image:""};return new Promise((function(t,o){ee.a.post(oe,e).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),o(e)})).then((function(){}))}))}function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t,o){console.log("postBorrowing: "+JSON.stringify(e)),ee.a.post(ne,e).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),o(e)})).then((function(){}))}))}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(t,o){ee.a.delete(ne,{data:e}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),o(e)})).then((function(){}))}))}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n={user_id:e,book_id:t,isbn:o};return console.log("getBorrowedBooks user_id: "+e),new Promise((function(e,t){ee.a.get(ne,{params:n}).then((function(t){console.log(t.data),e(t.data)})).catch((function(e){console.log(e),t(e)})).then((function(){}))}))}var ge={myFunc:re,getUsers:ae,postUser:se,getBooks:ie,postBook:le,postBorrowing:ce,deleteBorrowing:ue,getBorrowedBooks:de},he={name:"Borrowing",props:{},components:{"common-dialog":w},data:function(){return{user_id:"",isbn:"",user:{id:0,name:"",email:""},book:{id:0,isbn:"",title:"",authors:"",image:""},new_borrowing_books:[],borrowed_books:[],dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{searchUser:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=parseInt(e.user_id),isNaN(o)&&(o=0),t.next=4,ge.getUsers(o,"");case 4:if(n=t.sent,n.length){t.next=9;break}return e.dialog.msg="この利用者IDは登録されていません。",e.dialog.on=!0,t.abrupt("return");case 9:return e.user=n[0],t.next=12,ge.getBorrowedBooks(o,0,"");case 12:e.borrowed_books=t.sent;case 13:case"end":return t.stop()}}),t)})))()},execBorrowing:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.user_id.length&&e.new_borrowing_books.length){t.next=4;break}return e.dialog.msg="利用者IDと貸出図書のISBNを入力して下さい。",e.dialog.on=!0,t.abrupt("return");case 4:return o=[],n=e.user.id,e.new_borrowing_books.forEach((function(e){o.push({user_id:n,book_id:e.id,book_isbn:e.isbn})})),console.log(o),t.next=10,ge.postBorrowing(o);case 10:r=t.sent,console.log("postBorrowing res: "+r),e.dialog.msg="貸出処理を実行しました。",e.dialog.on=!0,e.resetForm();case 15:case"end":return t.stop()}}),t)})))()},cancel:function(e){this.new_borrowing_books.splice(e,1)},resetForm:function(){this.user_id="",this.isbn="",this.user={id:0,name:"",email:""},this.book={isbn:"",title:"",image:""},this.new_borrowing_books=[],this.borrowed_books=[]},addToCart:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(13===e.isbn.length){t.next=2;break}return t.abrupt("return");case 2:return console.log("addToCart ini"),o=e.isbn,n=[],t.next=7,ge.getBorrowedBooks(0,0,o);case 7:if(n=t.sent,console.log(o+" exist in borrowing:"+n),!n.length){t.next=15;break}return console.log("check borrowing"),e.dialog.msg="貸し出し中の図書です。",e.dialog.on=!0,e.book="",t.abrupt("return");case 15:return t.next=17,ge.getBooks(0,o,"");case 17:if(n=t.sent,console.log("newBook:"+n),n.length){t.next=24;break}return console.log("check books"),e.dialog.msg="登録されていない図書です。",e.dialog.on=!0,t.abrupt("return");case 24:e.book=n[0],console.log(e.book),e.new_borrowing_books.push(e.book);case 27:case"end":return t.stop()}}),t)})))()},closeCommonDialog:function(e){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+e),t&&this.$router.push(t)}},watch:{}},me=he,ve=o("1f4f"),be=o("8654"),pe=Object(g["a"])(me,Q,X,!1,null,null,null),fe=pe.exports;m()(pe,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VContainer:E["a"],VRow:z["a"],VSimpleTable:ve["a"],VSpacer:_["a"],VTextField:be["a"]});var _e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("返却")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{label:"ISBN",outlined:""},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary"},on:{click:e.execReturning}},[e._v("返却")]),o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.new_returning_books.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th")])]),o("tbody",e._l(e.new_returning_books,(function(t,n){return o("tr",{key:t.isbn},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[o("v-btn",{attrs:{rounded:"",dark:"",color:"green"},on:{click:function(t){return e.cancel(n)}}},[e._v("cancel")])],1)])})),0)]},proxy:!0}],null,!1,2732754158)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}})],1)],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}})],1)},ke=[],we={name:"Returning",props:{},components:{"common-dialog":w},data:function(){return{isbn:"",book:{isbn:"",title:"",image:""},new_returning_books:[],dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{cancel:function(e){this.new_returning_books.splice(e,1)},execReturning:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.new_returning_books.length){t.next=4;break}return e.dialog.msg="返却図書のISBNを入力して下さい。",e.dialog.on=!0,t.abrupt("return");case 4:return o=e.new_returning_books,t.next=7,ge.deleteBorrowing(o);case 7:n=t.sent,console.log(n),e.new_returning_books=[],e.dialog.msg="返却処理を実行しました。",e.dialog.on=!0,e.resetForm();case 13:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.isbn="",this.book={isbn:"",title:"",image:""},this.new_returning_books=[]},closeCommonDialog:function(e){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+e),t&&this.$router.push(t)},isInBarrowing:function(e){return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge.getBorrowedBooks(0,0,e);case 2:return o=t.sent,t.abrupt("return",0<o.length);case 4:case"end":return t.stop()}}),t)})))()},searchBook:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,ge.getBooks(0,e,"");case 2:if(n=o.sent,!n.length){o.next=9;break}return t.book=n[0],t.new_returning_books.push(n[0]),o.abrupt("return",n[0]);case 9:return o.abrupt("return",null);case 10:case"end":return o.stop()}}),o)})))()}},watch:{isbn:function(e){if(13===e.length){var t=e,o=this.isInBarrowing(t);if(console.log(t+" exist in borrowing:"+o),!o)return console.log("check borrowing"),this.dialog.msg="登録されていない図書です。",this.dialog.on=!0,void(this.book="");this.searchBook(t)}}}},xe=we,ye=Object(g["a"])(xe,_e,ke,!1,null,null,null),Be=ye.exports;m()(ye,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VContainer:E["a"],VRow:z["a"],VSimpleTable:ve["a"],VSpacer:_["a"],VTextField:be["a"]});var Ve=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("蔵書検索")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"7",sm:"4"}},[o("v-text-field",{attrs:{label:"keyword",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":e.searchBook},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),o("v-col",{attrs:{cols:"1",sm:"1"}},[o("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return e.editBook("0")}}},[o("v-icon",[e._v(" mdi-plus ")])],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[e.search_result.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ISBN")]),o("th",{staticClass:"text-left"},[e._v("Title ")]),o("th",{staticClass:"text-left"},[e._v("Authors ")])])]),o("tbody",e._l(e.search_result,(function(t){return o("tr",{key:t.id,on:{click:function(o){return e.editBook(t.id)}}},[o("td",[e._v(e._s(t.isbn))]),o("td",[e._v(e._s(t.title))]),o("td",[e._v(e._s(t.authors))])])})),0)]},proxy:!0}],null,!1,3497187307)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1)],1)],1)},Se=[],$e={name:"BookSearch",props:{},data:function(){return{keyword:"",search_result:[]}},methods:{searchBook:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge.getBooks(0,"",e.keyword);case 2:e.search_result=t.sent;case 3:case"end":return t.stop()}}),t)})))()},editBook:function(e){this.$router.push("/bookedit/".concat(e))}}},Ce=$e,Te=o("132d"),Re=Object(g["a"])(Ce,Ve,Se,!1,null,"a1c0420c",null),je=Re.exports;m()(Re,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VContainer:E["a"],VIcon:Te["a"],VRow:z["a"],VSimpleTable:ve["a"],VSpacer:_["a"],VTextField:be["a"]});var Oe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v(e._s(e.execType))]),o("v-card",{attrs:{elevation:"2"}},[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-img",{attrs:{src:e.book.image,width:"200"}})],1),o("v-col",{attrs:{cols:"8"}},[o("v-row",[o("v-col",[o("v-text-field",{attrs:{id:"isbn",label:"ISBN",outlined:"",readonly:e.editmode},on:{input:e.checkISBN},model:{value:e.isbn,callback:function(t){e.isbn=t},expression:"isbn"}})],1),o("v-col",[o("v-radio-group",{attrs:{row:""},on:{change:e.checkISBN},model:{value:e.book_api,callback:function(t){e.book_api=t},expression:"book_api"}},[o("v-radio",{attrs:{label:"Google Books",value:"google"}})],1)],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("br"),o("v-text-field",{attrs:{label:"Title",outlined:""},model:{value:e.book.title,callback:function(t){e.$set(e.book,"title",t)},expression:"book.title"}}),o("br"),o("v-text-field",{attrs:{label:"Authors",outlined:""},model:{value:e.book.authors,callback:function(t){e.$set(e.book,"authors",t)},expression:"book.authors"}}),o("br"),o("p",{directives:[{name:"show",rawName:"v-show",value:e.book_status,expression:"book_status"}]},[e._v(" 状態："+e._s(e.book_status)+" "),o("br")]),o("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:e.updateBook}},[e._v(e._s(e.execType))])],1)],1)],1)],1)],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}})],1)},Ue=[],Ie=(o("3ca3"),o("ddb0"),o("9861"),o("25f0"),o("ac1f"),o("841c"),o("fb6a"),{name:"BookEdit",props:{},components:{"common-dialog":w},data:function(){return{book:{id:0,isbn:"",title:"",authors:"",image:"no-image.png"},editmode:!1,book_api:"google",isbn:"",execType:"",book_status:"",dialog:{on:!1,msg:"test text",type:"notice",to:""}}},methods:{searchBook:function(){var e=arguments,t=this;return Object(Y["a"])(regeneratorRuntime.mark((function o(){var n,r,a,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:0,r=e.length>1&&void 0!==e[1]?e[1]:"",a=e.length>2&&void 0!==e[2]?e[2]:"",o.next=5,ge.getBooks(n,r,a);case 5:s=o.sent,t.book=s[0],t.isbn=s[0].isbn;case 8:case"end":return o.stop()}}),o)})))()},updateBook:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(e.book),e.book.isbn&&e.book.title){t.next=5;break}return e.dialog.msg="ISBNとタイトルを入力して下さい。",e.dialog.on=!0,t.abrupt("return");case 5:return t.next=7,ge.postBook(e.book);case 7:return o=t.sent,console.log("updateBook result: "+o),e.dialog.msg=e.execType+"処理を実行しました。",e.dialog.to="/book_search",e.dialog.on=!0,t.abrupt("return");case 13:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.book={isbn:"",title:"",authors:"",image:"no-image.png"},this.isbn=""},closeDialog:function(){this.dialog.on=!1;var e=this.dialog.to;this.dialog.to="",e&&this.$router.push(e)},checkISBN:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.editmode&&13===e.isbn.length){t.next=2;break}return t.abrupt("return");case 2:return console.log("checkISBN"),t.next=5,ge.getBooks(0,e.isbn,"");case 5:if(o=t.sent,console.log("checkISBN: "+o),!o.length){t.next=12;break}return e.dialog.msg="すでに登録済みです。",e.dialog.on=!0,e.isbn="",t.abrupt("return");case 12:n=e.isbn,"google"===e.book_api?e.getBookInfo1(n):"ndl"===e.book_api&&e.getBookInfo2(n);case 14:case"end":return t.stop()}}),t)})))()},getBookInfo1:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function o(){var n,r,a,s,i,l,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return console.log("getBookInfo1"),t.searchResults=[],n="https://www.googleapis.com/books/v1/volumes?",r={q:"isbn:".concat(e),maxResults:1},a=new URLSearchParams(r),o.next=7,fetch(n+a).then((function(e){return e.json()}));case 7:if(s=o.sent,0!=s.totalItems){o.next=12;break}return t.dialog.msg="ISBN non found in Google Books",t.dialog.on=!0,o.abrupt("return");case 12:console.log(s.items),i=s.items[0].volumeInfo,console.log(i),l=i.title?i.title:"",c=Array.isArray(i.authors)?i.authors.toString():"",u=i.imageLinks.thumbnail?i.imageLinks.thumbnail:"no-image.png",t.book.isbn=e,t.book.title=l,t.book.authors=c,t.book.image=u;case 22:case"end":return o.stop()}}),o)})))()},getBookInfo2:function(e){var t="https://iss.ndl.go.jp/api/opensearch?",o={isbn:"isbn:".concat(e),cnt:1},n=new URLSearchParams(o);this.axios.get(t+n,{timeout:5e3,responseType:"document"}).then((function(t){var o=t.data,n=o.search(/<item>/i);if(-1===n)return this.dialog.msg="ISBN non found in NDL",void(this.dialog.on=!0);var r=o.search(/<\/item>/i),a=o.slice(n+6,r),s=a.search(/<title>/i),i=a.search(/<\/title>/i),l=a.slice(s+7,i);console.log("title : "+l);var c=a.search(/<author>/i),u=a.search(/<\/author>/i),d=a.slice(c+8,u);console.log("author : "+d);var g="no-image.png";console.log(g),this.book.isbn=e,this.book.title=l,this.book.authors=d,this.book.image=g})).catch((function(e){console.log(e)}))},closeCommonDialog:function(e){this.dialog.on=!1,console.log("close common dialog: "+e)}},mounted:function(){var e=1*this.$route.params.id;console.log("mounted id: "+e),"0"==e?(this.isbn="",this.editmode=!1,this.execType="登録",this.book_status=""):(console.log("id: "+e),this.editmode=!0,this.searchBook(e),console.log("mounted this.book: "+JSON.stringify(this.book)),this.execType="更新")}}),Ne=Ie,De=o("adda"),Ee=o("67b6"),Pe=o("43a6"),Fe=Object(g["a"])(Ne,Oe,Ue,!1,null,null,null),He=Fe.exports;m()(Fe,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VImg:De["a"],VRadio:Ee["a"],VRadioGroup:Pe["a"],VRow:z["a"],VTextField:be["a"]});var Ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v("利用者検索")]),o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"7",sm:"4"}},[o("v-text-field",{attrs:{label:"keyword",outlined:"",clearable:"","append-outer-icon":"mdi-magnify"},on:{"click:append-outer":e.searchUser},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),o("v-col",{attrs:{cols:"1",sm:"1"}},[o("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){return e.editUser(0)}}},[o("v-icon",[e._v(" mdi-plus ")])],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-card",{attrs:{elevation:"2"}},[Array.isArray(e.search_result)&&e.search_result.length?o("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[e._v("ID")]),o("th",{staticClass:"text-left"},[e._v("Name ")]),o("th",{staticClass:"test-left"},[e._v("E-mail")])])]),o("tbody",e._l(e.search_result,(function(t){return o("tr",{key:t.id,on:{click:function(o){return e.editUser(t.id)}}},[o("td",[e._v(e._s(t.id))]),o("td",[e._v(e._s(t.name))]),o("td",[e._v(e._s(t.email))])])})),0)]},proxy:!0}],null,!1,1306142549)}):e._e()],1)],1),o("v-col",{attrs:{cols:"4"}},[o("v-spacer")],1)],1)],1)],1)},Le=[],Je={name:"UserSearch",props:{},data:function(){return{keyword:"",search_result:[]}},methods:{searchUser:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge.getUsers(0,e.keyword);case 2:e.search_result=t.sent;case 3:case"end":return t.stop()}}),t)})))()},editUser:function(e){this.$router.push("/useredit/".concat(e))}}},Me=Je,Ge=Object(g["a"])(Me,Ae,Le,!1,null,null,null),qe=Ge.exports;m()(Ge,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VContainer:E["a"],VIcon:Te["a"],VRow:z["a"],VSimpleTable:ve["a"],VSpacer:_["a"],VTextField:be["a"]});var ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",[e._v(e._s(e.execType))]),o("v-card",{attrs:{elevation:"2"}},[o("v-row",[o("v-col",{attrs:{cols:"8"}},[o("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"更新"==e.execType,expression:"execType == '更新'"}],attrs:{label:"ID",outlined:"",readonly:""},model:{value:e.user.id,callback:function(t){e.$set(e.user,"id",t)},expression:"user.id"}}),o("br"),o("v-text-field",{attrs:{label:"Name",outlined:""},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}}),o("br"),o("v-text-field",{attrs:{label:"E-mail",outlined:""},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}})],1),o("v-col",{attrs:{cols:"8"}},[o("v-btn",{attrs:{rounded:"",large:"",color:"primary",dark:""},on:{click:e.updateUser}},[e._v(e._s(e.execType))])],1)],1)],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}})],1)},Ke=[],We={name:"UserEdit",props:{},components:{"common-dialog":w},data:function(){return{user:{id:0,name:"",email:""},execType:"",dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{resetForm:function(){this.user={id:0,name:"",email:""}},updateUser:function(){var e=this;return Object(Y["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge.getUsers(0,e.user.email);case 2:if(o=t.sent,e.user.id||!o.length){t.next=7;break}return e.dialog.msg="このメールアドレスは、すでに登録済みです。",e.dialog.on=!0,t.abrupt("return");case 7:return t.next=9,ge.postUser(e.user);case 9:e.dialog.msg=e.execType+"処理を実行しました。",e.dialog.on=!0;case 11:case"end":return t.stop()}}),t)})))()},closeCommonDialog:function(e){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+e),t&&this.$router.push(t)},searchUser:function(e){var t=this;return Object(Y["a"])(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,ge.getUsers(e,"");case 2:n=o.sent,t.user=n[0];case 4:case"end":return o.stop()}}),o)})))()}},mounted:function(){console.log(this.$route.params.id);var e=1*this.$route.params.id;0!==e?(this.execType="更新",this.searchUser(e)):this.execType="登録"}},Qe=We,Xe=Object(g["a"])(Qe,ze,Ke,!1,null,null,null),Ye=Xe.exports;m()(Xe,{VBtn:v["a"],VCard:b["a"],VCol:q["a"],VRow:z["a"],VTextField:be["a"]});var Ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[e._v(" "+e._s(e.$t("hello"))),o("br"),o("v-text-field",{attrs:{clearable:"",id:"myid"},on:{paste:e.myEventHandler2},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),o("br"),o("v-icon",[e._v("mdi-plus")]),o("v-icon",[e._v("mdi-open-in-new")]),o("v-icon",[e._v("mdi-pencil")]),o("br"),o("p",[e._v(e._s(e.msg))]),o("br"),o("br"),o("p",[o("v-btn",{on:{click:e.openCommonDialog}},[e._v("dialog test")])],1),o("common-dialog",{attrs:{dialog:e.dialog},on:{"close-common-dialog":e.closeCommonDialog}}),o("p",[o("v-btn",{on:{click:e.get_book}},[e._v("get book")])],1),o("p",[o("v-btn",{on:{click:e.callUtil}},[e._v("coll util")])],1),o("p",[o("v-btn",{on:{click:e.getUser}},[e._v("get user")]),e._v(" / "),o("v-btn",{on:{click:e.postUser}},[e._v("post user")]),e._v(" / "),o("v-btn",{on:{click:e.deleteUser}},[e._v("delete user")])],1)],1)},et=[],tt={name:"Home",props:{},components:{"common-dialog":w},data:function(){return{msg:"abc",dialog:{on:!1,msg:"",type:"notice",to:""}}},methods:{getUser:function(){var e=ge.getUsers(1,"");console.log(e)},postUser:function(){var e="/users",t={id:"8",name:"Dante Alghieri aaa",email:"dalghieriaaa@dummy.com"};this.axios.post(e,t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},deleteUser:function(){var e="/users/6";this.axios.delete(e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},callUtil:function(){console.log("btn clicked")},get_book:function(){var e="https://iss.ndl.go.jp/api/opensearch?isbn=9784167105822&cnt=1";this.axios.get(e,{timeout:5e3,responseType:"document"}).then((function(e){var t=e.data,o=t.search(/<item>/i),n=t.search(/<\/item>/i),r=t.slice(o+6,n),a=r.search(/<title>/i),s=r.search(/<\/title>/i),i=r.slice(a+7,s);console.log("title : "+i);var l=r.search(/<author>/i),c=r.search(/<\/author>/i),u=r.slice(l+8,c);console.log("author : "+u)})).catch((function(e){console.log(e)}))},openCommonDialog:function(){this.dialog.msg="test test test",this.dialog.on=!0},closeCommonDialog:function(e){var t=this.dialog.to;this.dialog.to="",this.dialog.on=!1,console.log("close common dialog: "+e),t&&this.$router.push(t)},myEventHandler1:function(){},myEventHandler2:function(){null!=this.msg&&5===this.msg.length&&(console.log("handler2: "+this.msg),this.msg="")}},watch:{msg:function(e){null!=e&&5===e.length&&(console.log(this.msg),this.msg="")}}},ot=tt,nt=Object(g["a"])(ot,Ze,et,!1,null,null,null),rt=nt.exports;m()(nt,{VBtn:v["a"],VIcon:Te["a"],VTextField:be["a"]}),n["a"].use(A["a"]);var at=[{path:"/",name:"Home",component:W},{path:"/borrowing",name:"Borrowing",component:fe},{path:"/returning",name:"Returning",component:Be},{path:"/booksearch",name:"BookSearch",component:je},{path:"/bookedit/:id",name:"BookEdit",component:He},{path:"/usersearch",name:"UserSearch",component:qe},{path:"/useredit/:id",name:"UserEdit",component:Ye},{path:"/testa",name:"TestA",component:rt},{path:"*",redirect:"/"}],st=new A["a"]({mode:"history",base:"/",routes:at}),it=st,lt=o("f309");n["a"].use(lt["a"]);var ct=new lt["a"]({}),ut=o("130e"),dt=o("a925"),gt=o("f0eb");n["a"].config.productionTip=!1,n["a"].use(ut["a"],ee.a),n["a"].use(dt["a"]),n["a"].use(gt["default"]);var ht=new dt["a"]({locale:"ja",messages:{ja:o("e299"),en:o("ab60"),it:o("f3f4")}});new n["a"]({router:it,vuetify:ct,i18n:ht,render:function(e){return e(H)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";o("9c0c")},"9c0c":function(e,t,o){},ab60:function(e){e.exports=JSON.parse('{"app_name":"Open Bookcase","hello":"Hello !","btn_home":"Home","btn_borrowing":"Borrowing","btn_returning":"Returning","btn_booksearch":"Books","btn_usersearch":"Users","btn_reset":"Reset"}')},e299:function(e){e.exports=JSON.parse('{"app_name":"みんなの本棚","hello":"こんにちは","btn_home":"ホーム","btn_borrowing":"貸出","btn_returning":"返却","btn_booksearch":"図書","btn_usersearch":"利用者","btn_reset":"リセット"}')},f3f4:function(e){e.exports=JSON.parse('{"app_name":"Scaffale per tutti","hello":"Buon giorno !","btn_home":"Home","btn_borrowing":"Prestito","btn_returning":"Restituzione","btn_booksearch":"Libri","btn_usersearch":"Utenti","btn_reset":"ripristino"}')}});
//# sourceMappingURL=app.d4cd722a.js.map